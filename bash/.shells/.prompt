############## PROMPT OPTIONS ################
# 
# Некоторые удобные параметры командной строки tput следующие
# tput bold – Bold effect
# tput rev – Display inverse colors
# tput sgr0 – Reset everything
# tput setaf {CODE} – Set foreground color, see color {CODE} table below for more information
# tput setab {CODE} – Set background color, see color {CODE} table below for more information
# 
# 0 – Black; 1 – Red; 2 – Green; 3 – Yellow; 4 – Blue; 5 – Magenta; 6 – Cyan; 7 – White
# 
# Example: LightGreyBG="$(tput setab 7)"

# Эффекты
dimefct='\[\e[0;2m\]' # Standart - Muted
blinfct='\[\e[0;5m\]' # Blink

# Цвета
txtgre='\[\e[0;38;5;115m\]' # LightGreen
txtpch='\[\e[0;1;38;5;210m\]' # Peach - Bold
txtvio='\[\e[0;2;38;5;98m\]' # Dark Violet - Muted
txteme='\[\e[0;38;5;37m\]' # Emerald
txttox='\[\e[0;38;5;41m\]' # Toxic
txtcre='\[\e[0;1;2;97m\]' #  Cream - Bold
txtpic='\[\e[0;1;38;5;205m\]' # Pink - Bold
txtend='\[\e[0;38;5;255m\]' # Best White

# Prompt Элементы
histnumb='\!' # Показывает номер команды в истории
comdnumd='\#' # Показывает номер команды в терминале
startprt='\$' # Начальная строка ввода команды
gitfirst='$(git branch 2>/dev/null | grep '"'"'^*'"'"' | colrm 1 2)' # $(git symbolic-ref HEAD 2>/dev/null)
gitsbrch='$(git_branche)' # Показывает ветку в гит.
timeshrt='\A' # Время без секунд
username='\u'
hostshrt='\h' # Хостнейм без .
workdirc='\w' # Список всех директорий
newsline='\n' # Новая строка
poin1prt='▶'
poin2prt='➜' 
curntdir='\W' # Показывает текущюю директорию

# Other Prompt Elements
# \v # bash version
# \l # terminal 
# \s # name shell
# \a # bell 
# \r # carriage return
# $? # exit status
# $('sample') # start 'sample' comand
# $(ip route get 1.1.1.1 | awk -F"src " '"'"'NR==1{split($2,a," ");print a[1]}'"'"') # ip address

# Заранее определённые блоки командной строки
timeC="${dimefct}[${dimefct}${timeshrt}${dimefct}]"
userC="${dimefct}[${dimefct}${username}${dimefct}@${dimefct}${hostshrt}${dimefct}]${dimefct}>"
gitbC="${txtpch}${gitfirst}"
wdirC="${txteme}${workdirc}"
hisnC="${txtvio}${histnumb}"
crntC="${dimefct}.${dimefct}/"
crdrC="${txtcre}${curntdir}"
pontC="${dimefct}${poin2prt}"
strtC="${txttox}${poin2prt}"

# Красный цвет пользователя для root
if [ "${UID}" -eq "0" ]; then 
  userC="${dimefct}[${txtpic}${username}${dimefct}]${dimefct}>"
fi

# Запрещаем vertualenv'у вмешиваться в наше приглашение командной строки
export VIRTUAL_ENV_DISABLE_PROMPT=1

# Сокращать путь к текущему каталогу в строке терминала
export PROMPT_DIRTRIM=5

function _prompt_command() {
    # Запускаем функцию для получения названия виртуального окружения и отображения в строке
    virtualenv_part=$(_virtualenv_prompt)
    PS1="$virtualenv_part${timeC}${userC} ${gitbC} ${wdirC}${newsline}${hisnC} ${crntC}${crdrC} ${strtC} ${txtend}"
}

function _virtualenv_prompt() {
    if [[ $VIRTUAL_ENV != "" ]]
    then
        echo ${dimefct}"["${txtgre}"${VIRTUAL_ENV##*/}"${dimefct}"]"
    else
        echo ""
    fi
}

PROMPT_COMMAND=_prompt_command
